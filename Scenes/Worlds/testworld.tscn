[gd_scene load_steps=40 format=3 uid="uid://csn6vamjgfjbr"]

[ext_resource type="PackedScene" uid="uid://co8tc5q81xn68" path="res://Scenes/Managers/scareDirector.tscn" id="1_faoyl"]
[ext_resource type="Script" uid="uid://bn56m3ol3qagp" path="res://Scripts/GameManagement/TestworldResourceSaver.gd" id="1_y5q3h"]
[ext_resource type="PackedScene" uid="uid://b02uboce77q78" path="res://Scenes/player.tscn" id="2_n1cxu"]
[ext_resource type="Script" uid="uid://ob85tc4yf3a0" path="res://Scripts/Cutscenes/test_cutscene.gd" id="4_dbw12"]
[ext_resource type="PackedScene" uid="uid://bxeem4u06w0gh" path="res://Scenes/Prefabs/gui/interactable_test.tscn" id="4_p0gx3"]
[ext_resource type="Script" uid="uid://clx466x67r36q" path="res://Scenes/Worlds/world_environment_data.gd" id="5_6517x"]
[ext_resource type="PackedScene" uid="uid://xy4w3c35frqw" path="res://Scenes/Prefabs/MoveableObjects/lamp.tscn" id="12_dbw12"]
[ext_resource type="PackedScene" uid="uid://dmy0v04imvkbv" path="res://Scenes/Prefabs/MoveableObjects/cardboard_box_big.tscn" id="15_87p0u"]
[ext_resource type="PackedScene" uid="uid://ceasmrd6qawc5" path="res://Scenes/Prefabs/StaticObjects/Tiles/wall_with_door.tscn" id="15_koth6"]
[ext_resource type="PackedScene" uid="uid://b2c5c47wnbu3f" path="res://Scenes/Prefabs/MoveableObjects/desk_2.tscn" id="16_olrcr"]
[ext_resource type="PackedScene" uid="uid://bvha2qolbtfko" path="res://Scenes/Prefabs/MoveableObjects/desk_2_Only.tscn" id="17_mpvvd"]
[ext_resource type="PackedScene" uid="uid://b85fvq8nn7wpm" path="res://Scenes/Prefabs/MoveableObjects/Monitor_interactable.tscn" id="18_87p0u"]
[ext_resource type="PackedScene" uid="uid://b3tdwehc6j730" path="res://Scenes/Prefabs/crttv_screen.tscn" id="19_87p0u"]
[ext_resource type="PackedScene" uid="uid://erkjuywjqecv" path="res://Scenes/Prefabs/StaticObjects/hr_archway_wall.tscn" id="20_uddld"]
[ext_resource type="PackedScene" uid="uid://b2rvvsrl03wcr" path="res://Scenes/Prefabs/StaticObjects/hr_wall_wtih_door.tscn" id="21_bf1bd"]
[ext_resource type="PackedScene" uid="uid://c4nsdvtqi2ydi" path="res://Scenes/Prefabs/StaticObjects/airduct_longer.tscn" id="21_fscik"]
[ext_resource type="PackedScene" uid="uid://duh0mp4ga7irm" path="res://Scenes/Prefabs/StaticObjects/airduct_vent_cover.tscn" id="22_cdvgx"]
[ext_resource type="Script" uid="uid://cbvb1snf756vu" path="res://Scripts/StateMachine/Player/Crouching_Assistant.gd" id="22_n7wpk"]
[ext_resource type="PackedScene" uid="uid://bdx1ipveuafpp" path="res://Scenes/Prefabs/StaticObjects/computer_tower_tall.tscn" id="23_dbw12"]
[ext_resource type="PackedScene" uid="uid://c88ceo5ug6aah" path="res://Scenes/Prefabs/MoveableObjects/mug.tscn" id="24_h0jgm"]
[ext_resource type="Script" uid="uid://cyfh53j3y05m0" path="res://Scripts/Misc/zone_optimizer.gd" id="24_s3eqx"]
[ext_resource type="PackedScene" uid="uid://cis7so1fqoyyd" path="res://Scenes/Prefabs/MoveableObjects/file_folder.tscn" id="25_ckfhg"]
[ext_resource type="PackedScene" uid="uid://cjnqu05bvamsg" path="res://Scenes/Prefabs/MoveableObjects/new_mailcart.tscn" id="26_w0ib7"]
[ext_resource type="PackedScene" uid="uid://wd85mtseuke1" path="res://Scenes/Prefabs/StaticObjects/Tiles/elevator_prefab.tscn" id="41_n2l23"]
[ext_resource type="Texture2D" uid="uid://1kgm36rh1fdo" path="res://Assets/Textures/Carpet.png" id="42_w5g3l"]
[ext_resource type="Script" uid="uid://db2hrldo4efr" path="res://Scripts/Misc/floor_type.gd" id="44_epuy0"]

[sub_resource type="NavigationMesh" id="NavigationMesh_5ah0g"]
vertices = PackedVector3Array(0, 1, -3.25, 0, 1, -5, -0.75, 1, -5.25, -1.5, 1, -2.5, -4.25, 1, -9.5, -4, 1, -10.75, -14.5, 1, -14.5, -0.75, 1, -6.25, 0, 1, -6.5, 0, 1, -9.25, -2.5, 1, -10.75, -2.75, 1, -14.5, -1.5, 1, -1.75, -14.5, 1, -1.75, 14, 1, -10.75, 14.25, 1, -10, 14.5, 1, -10, 14.5, 1, -14.5, 14, 1, -9.25, 11.25, 1, -5, 11.5, 1, -4, 14.5, 1, -4, 5.5, 1, -9.25, 5.75, 1, -4.5, 6, 1, -5, 2.75, 1, -2.25, 4.25, 1, -2.25, 4.25, 1, -3.25, 2.5, 1, -3.25, 0.75, 1, -6.25, 0.75, 1, -5.25, 5.75, 1, -3.5, 6.5, 1, -2, 5.75, 1, -1.25, 6, 1, -0.75, 7.5, 1, -0.5, 11.25, 1, -3.25, 7.25, 1, 1, 6, 1, 14.5, 14.5, 1, 14.5, 6.25, 1, -3.25, 6, 1, 1, 5.5, 1, -0.5, 4.5, 1, -1.25, 5.5, 1, 0.75, 1.5, 1, -0.25, 0, 1, -0.25, -0.5, 1, 14.5, 2.75, 1, -1, -0.5, 1, -0.75, -1.5, 1, -1.25, -14.5, 1, 14.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(4, 6, 5), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 4), PackedInt32Array(2, 3, 7), PackedInt32Array(7, 3, 4), PackedInt32Array(10, 5, 11), PackedInt32Array(11, 5, 6), PackedInt32Array(3, 12, 4), PackedInt32Array(4, 12, 13), PackedInt32Array(4, 13, 6), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(10, 11, 14), PackedInt32Array(14, 11, 17), PackedInt32Array(18, 15, 16), PackedInt32Array(20, 19, 21), PackedInt32Array(21, 19, 18), PackedInt32Array(21, 18, 16), PackedInt32Array(24, 23, 22), PackedInt32Array(24, 22, 19), PackedInt32Array(19, 22, 18), PackedInt32Array(26, 25, 27), PackedInt32Array(27, 25, 28), PackedInt32Array(28, 30, 29), PackedInt32Array(23, 31, 27), PackedInt32Array(1, 30, 0), PackedInt32Array(0, 30, 28), PackedInt32Array(27, 28, 23), PackedInt32Array(23, 28, 29), PackedInt32Array(23, 29, 22), PackedInt32Array(22, 29, 9), PackedInt32Array(9, 29, 8), PackedInt32Array(33, 32, 34), PackedInt32Array(34, 32, 35), PackedInt32Array(35, 36, 37), PackedInt32Array(37, 36, 21), PackedInt32Array(37, 21, 39), PackedInt32Array(37, 39, 38), PackedInt32Array(32, 40, 35), PackedInt32Array(35, 40, 36), PackedInt32Array(21, 36, 20), PackedInt32Array(38, 41, 37), PackedInt32Array(34, 42, 33), PackedInt32Array(33, 42, 43), PackedInt32Array(44, 41, 45), PackedInt32Array(45, 41, 46), PackedInt32Array(46, 41, 38), PackedInt32Array(46, 38, 47), PackedInt32Array(26, 43, 25), PackedInt32Array(25, 43, 48), PackedInt32Array(47, 49, 46), PackedInt32Array(42, 44, 43), PackedInt32Array(43, 44, 48), PackedInt32Array(48, 44, 45), PackedInt32Array(13, 12, 50), PackedInt32Array(50, 49, 13), PackedInt32Array(13, 49, 47), PackedInt32Array(13, 47, 51)]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_28hyf"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_11ekw"]
sky_material = SubResource("ProceduralSkyMaterial_28hyf")

[sub_resource type="Environment" id="Environment_13vtk"]
background_mode = 2
sky = SubResource("Sky_11ekw")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cx8qq"]
albedo_texture = ExtResource("42_w5g3l")
emission_energy_multiplier = 13.22
uv1_scale = Vector3(25, 25, 25)
texture_filter = 2
point_size = 128.0

[sub_resource type="PlaneMesh" id="PlaneMesh_4wwe0"]
lightmap_size_hint = Vector2i(377, 377)
add_uv2 = true
size = Vector2(75, 75)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_o7c60"]
data = PackedVector3Array(37.5, 0, 39, -37.5, 0, 39, 37.5, 0, -39, -37.5, 0, 39, -37.5, 0, -39, 37.5, 0, -39)

[sub_resource type="BoxShape3D" id="BoxShape3D_xc3id"]
size = Vector3(76.3111, 0.319824, 76.66)

[sub_resource type="BoxShape3D" id="BoxShape3D_sc46n"]
size = Vector3(0.644165, 0.463867, 2.39838)

[sub_resource type="BoxShape3D" id="BoxShape3D_nff0b"]
size = Vector3(11.7309, 11.1433, 9.20322)

[sub_resource type="BoxShape3D" id="BoxShape3D_vxn8k"]
size = Vector3(2.33154, 3.16882, 4.45436)

[sub_resource type="ViewportTexture" id="ViewportTexture_uddld"]
viewport_path = NodePath("CRTTVScreen/SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bf1bd"]
resource_local_to_scene = true
albedo_texture = SubResource("ViewportTexture_uddld")
uv1_scale = Vector3(8.225, 8.225, 8.225)
uv1_offset = Vector3(0, 0.105, 0)

[node name="world" type="Node3D" groups=["Persist"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.00758815)
script = ExtResource("1_y5q3h")
floor_num = -1

[node name="ScareDirector" parent="." instance=ExtResource("1_faoyl")]

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("cutscene_camera")]
transform = Transform3D(1, 0, 0, 0, 0.253066, 0.967449, 0, -0.967449, 0.253066, -0.45395, 5.90737, 5.81774)
script = ExtResource("4_dbw12")
cutscene_camera = NodePath(".")

[node name="Player" parent="." instance=ExtResource("2_n1cxu")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.2092, 0.0844421, 8.67806)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
navigation_mesh = SubResource("NavigationMesh_5ah0g")

[node name="stage" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="environment" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="NavigationRegion3D/environment"]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="NavigationRegion3D/environment"]
environment = SubResource("Environment_13vtk")
script = ExtResource("5_6517x")
dark_properties = {
"adjustment_contrast": 1.25,
"tonemap_exposure": 5.0
}

[node name="InteractableTest" parent="NavigationRegion3D" instance=ExtResource("4_p0gx3")]
transform = Transform3D(0.28, 0, 0, 0, 0.28, 0, 0, 0, 0.28, 0, 2, -5.82439)

[node name="Elevator" parent="." instance=ExtResource("41_n2l23")]
transform = Transform3D(0.0293697, 0, 0.999569, 0, 1, 0, -0.999569, 0, 0.0293697, -18.7858, -0.245457, 3.82707)

[node name="floor_meshes" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="carpet_mesh_1" type="MeshInstance3D" parent="floor_meshes" groups=["Real_Floor"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.61279, -0.494312, -1.01652)
layers = 1023
material_override = SubResource("StandardMaterial3D_cx8qq")
mesh = SubResource("PlaneMesh_4wwe0")

[node name="footstep_collider_carpet" type="Area3D" parent="floor_meshes/carpet_mesh_1"]
collision_layer = 32768
collision_mask = 32768
script = ExtResource("44_epuy0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor_meshes/carpet_mesh_1/footstep_collider_carpet"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.29548, 0)
shape = SubResource("ConcavePolygonShape3D_o7c60")

[node name="floor_gpu_particle_collision" type="GPUParticlesCollisionBox3D" parent="floor_meshes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.8851, -0.985187, 1.00272)
size = Vector3(92.6323, 2, 85.514)

[node name="floor_colliders" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0477006, 0)

[node name="StaticBody3D" type="StaticBody3D" parent="floor_colliders"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor_colliders/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.64869, -0.198545, -1.01932)
shape = SubResource("BoxShape3D_xc3id")

[node name="airduct_longer" parent="." instance=ExtResource("21_fscik")]
transform = Transform3D(1.47, 0, 0, 0, 2.49, 0, 0, 0, 1.47, 14.4115, 0.57453, 3.80822)
visible = false

[node name="Area3D" type="Area3D" parent="airduct_longer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.260137)
collision_layer = 0
collision_mask = 65536
script = ExtResource("22_n7wpk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="airduct_longer/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00421238, 0.00830393, 0.635229)
shape = SubResource("BoxShape3D_sc46n")

[node name="airduct_vent_cover" parent="." instance=ExtResource("22_cdvgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.5565, 1.29504, 6.18498)
visible = false

[node name="Lamp2" parent="." instance=ExtResource("12_dbw12")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16.4433, 0.902411, 3.11904)

[node name="ZoneOptimizer" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 2
script = ExtResource("24_s3eqx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="ZoneOptimizer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.45474, -1.30119, -0.427109)
shape = SubResource("BoxShape3D_nff0b")

[node name="DetectionArea" type="Area3D" parent="ZoneOptimizer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.4081, 0, 7.37555)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="ZoneOptimizer/DetectionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.448975, 0.835388, -0.134636)
shape = SubResource("BoxShape3D_vxn8k")

[node name="Cardboard_box_big" parent="." instance=ExtResource("15_87p0u")]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.1671, 0.325687, 7.29156)
contact_monitor = true
max_contacts_reported = 10

[node name="Cardboard_box_big2" parent="." instance=ExtResource("15_87p0u")]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.1671, 0.325687, 7.92122)
contact_monitor = true
max_contacts_reported = 10

[node name="Cardboard_box_big3" parent="." instance=ExtResource("15_87p0u")]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.8172, 0.325687, 7.75441)
contact_monitor = true
max_contacts_reported = 10

[node name="Cardboard_box_big4" parent="." instance=ExtResource("15_87p0u")]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.72618, 0.985113, 7.97805)
contact_monitor = true
max_contacts_reported = 10

[node name="StaticBody3D" parent="." instance=ExtResource("15_koth6")]
transform = Transform3D(0.647, 0, 0, 0, 0.647, 0, 0, 0, 0.647, -3.45649, 0.00906801, -7.39729)

[node name="Desk" parent="." instance=ExtResource("16_olrcr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.93076, 0.0369394, -1.36663)

[node name="Desk2" parent="." instance=ExtResource("17_mpvvd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.08481, 0.0474928, 4.44076)

[node name="Monitor" parent="." instance=ExtResource("18_87p0u")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -2.02617, 1.58316, 4.67029)
usernames = Array[String](["John"])
passwords = Array[String](["aaa"])

[node name="CRTTVScreen" parent="." instance=ExtResource("19_87p0u")]
transform = Transform3D(4.37114e-08, -6.60023e-15, 1, -1.50996e-07, -1, 2.5411e-21, 1, -1.50996e-07, -4.37114e-08, 8.34449, 1.6725, 8.79802)
material_override = SubResource("StandardMaterial3D_bf1bd")

[node name="HR_ArchwayWall" parent="." instance=ExtResource("20_uddld")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 3.53073, 0.0127748, -7.55547)

[node name="HR_Wall_Wtih_Door" parent="." instance=ExtResource("21_bf1bd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.86763, 0.0923328, -7.63503)

[node name="ComputerTowerTall" parent="." instance=ExtResource("23_dbw12")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.12863, 1.91117, 4.76756)

[node name="Mug" parent="." instance=ExtResource("24_h0jgm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.87936, 1.251, 4.67764)

[node name="FileFolder" parent="." instance=ExtResource("25_ckfhg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.11862, 1.19824, 4.27995)

[node name="Mailcart" parent="." instance=ExtResource("26_w0ib7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.77257, 0.306043, 13.8957)

[connection signal="body_entered" from="airduct_longer/Area3D" to="airduct_longer/Area3D" method="_on_body_entered"]
[connection signal="body_exited" from="airduct_longer/Area3D" to="airduct_longer/Area3D" method="_on_body_exited"]
[connection signal="body_entered" from="ZoneOptimizer" to="ZoneOptimizer" method="_on_body_entered"]
[connection signal="body_exited" from="ZoneOptimizer" to="ZoneOptimizer" method="_on_body_exited"]
[connection signal="body_entered" from="ZoneOptimizer/DetectionArea" to="ZoneOptimizer" method="_on_detection_area_body_entered"]
[connection signal="body_exited" from="ZoneOptimizer/DetectionArea" to="ZoneOptimizer" method="_on_detection_area_body_exited"]
