[gd_scene load_steps=32 format=3 uid="uid://csn6vamjgfjbr"]

[ext_resource type="PackedScene" uid="uid://co8tc5q81xn68" path="res://Scenes/Managers/scareDirector.tscn" id="1_faoyl"]
[ext_resource type="Script" path="res://Scripts/GameManagement/TestworldResourceSaver.gd" id="1_y5q3h"]
[ext_resource type="PackedScene" uid="uid://b02uboce77q78" path="res://Scenes/player.tscn" id="2_n1cxu"]
[ext_resource type="PackedScene" uid="uid://bxeem4u06w0gh" path="res://Scenes/Prefabs/gui/interactable_test.tscn" id="4_p0gx3"]
[ext_resource type="Script" path="res://Scenes/Worlds/world_environment_data.gd" id="5_6517x"]
[ext_resource type="PackedScene" uid="uid://erkjuywjqecv" path="res://Scenes/Prefabs/StaticObjects/hr_archway_wall.tscn" id="10_m81cq"]
[ext_resource type="PackedScene" uid="uid://duwevejxlw37b" path="res://Scenes/Prefabs/StaticObjects/Tiles/mail_room_wall_door.tscn" id="15_2x2rp"]
[ext_resource type="PackedScene" uid="uid://5dnxe87nmekr" path="res://Scenes/Prefabs/StaticObjects/Tiles/wall_meeting_room_with_door.tscn" id="15_tm150"]
[ext_resource type="PackedScene" uid="uid://ceasmrd6qawc5" path="res://Scenes/Prefabs/StaticObjects/Tiles/wall_with_door.tscn" id="15_toag5"]
[ext_resource type="PackedScene" uid="uid://bcrcp8v8fg3md" path="res://Scenes/Prefabs/MoveableObjects/body_from_ceiling.tscn" id="19_p7jh4"]
[ext_resource type="PackedScene" uid="uid://b0lkbbkvuy6ow" path="res://Scenes/Prefabs/StaticObjects/base_airduct.tscn" id="19_va06c"]
[ext_resource type="PackedScene" uid="uid://c4nsdvtqi2ydi" path="res://Scenes/Prefabs/StaticObjects/airduct_longer.tscn" id="21_fscik"]
[ext_resource type="PackedScene" uid="uid://duh0mp4ga7irm" path="res://Scenes/Prefabs/StaticObjects/airduct_vent_cover.tscn" id="22_cdvgx"]
[ext_resource type="Script" path="res://Scripts/StateMachine/Player/Crouching_Assistant.gd" id="22_n7wpk"]
[ext_resource type="Script" path="res://Scripts/Misc/zone_optimizer.gd" id="24_s3eqx"]
[ext_resource type="PackedScene" uid="uid://b2c5c47wnbu3f" path="res://Scenes/Prefabs/MoveableObjects/desk_2.tscn" id="25_rport"]
[ext_resource type="PackedScene" uid="uid://uuhrokgnd64l" path="res://Scenes/Prefabs/StaticObjects/Tiles/mail_room_wall.tscn" id="39_l18u8"]
[ext_resource type="PackedScene" uid="uid://wd85mtseuke1" path="res://Scenes/Prefabs/StaticObjects/Tiles/elevator_prefab.tscn" id="41_n2l23"]
[ext_resource type="Texture2D" uid="uid://1kgm36rh1fdo" path="res://Assets/Textures/Carpet.png" id="42_w5g3l"]
[ext_resource type="Script" path="res://Scripts/Misc/floor_type.gd" id="44_epuy0"]

[sub_resource type="NavigationMesh" id="NavigationMesh_5ah0g"]
vertices = PackedVector3Array(0, 1, -3.25, 0, 1, -5, -0.75, 1, -5.25, -1.5, 1, -2.5, -4.25, 1, -9.5, -4, 1, -10.75, -14.5, 1, -14.5, -0.75, 1, -6.25, 0, 1, -6.5, 0, 1, -9.25, -2.5, 1, -10.75, -2.75, 1, -14.5, -1.5, 1, -1.75, -14.5, 1, -1.75, 14, 1, -10.75, 14.25, 1, -10, 14.5, 1, -10, 14.5, 1, -14.5, 14, 1, -9.25, 11.25, 1, -5, 11.5, 1, -4, 14.5, 1, -4, 5.5, 1, -9.25, 5.75, 1, -4.5, 6, 1, -5, 2.75, 1, -2.25, 4.25, 1, -2.25, 4.25, 1, -3.25, 2.5, 1, -3.25, 0.75, 1, -6.25, 0.75, 1, -5.25, 5.75, 1, -3.5, 6.5, 1, -2, 5.75, 1, -1.25, 6, 1, -0.75, 7.5, 1, -0.5, 11.25, 1, -3.25, 7.25, 1, 1, 6, 1, 14.5, 14.5, 1, 14.5, 6.25, 1, -3.25, 6, 1, 1, 5.5, 1, -0.5, 4.5, 1, -1.25, 5.5, 1, 0.75, 1.5, 1, -0.25, 0, 1, -0.25, -0.5, 1, 14.5, 2.75, 1, -1, -0.5, 1, -0.75, -1.5, 1, -1.25, -14.5, 1, 14.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(4, 6, 5), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 4), PackedInt32Array(2, 3, 7), PackedInt32Array(7, 3, 4), PackedInt32Array(10, 5, 11), PackedInt32Array(11, 5, 6), PackedInt32Array(3, 12, 4), PackedInt32Array(4, 12, 13), PackedInt32Array(4, 13, 6), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(10, 11, 14), PackedInt32Array(14, 11, 17), PackedInt32Array(18, 15, 16), PackedInt32Array(20, 19, 21), PackedInt32Array(21, 19, 18), PackedInt32Array(21, 18, 16), PackedInt32Array(24, 23, 22), PackedInt32Array(24, 22, 19), PackedInt32Array(19, 22, 18), PackedInt32Array(26, 25, 27), PackedInt32Array(27, 25, 28), PackedInt32Array(28, 30, 29), PackedInt32Array(23, 31, 27), PackedInt32Array(1, 30, 0), PackedInt32Array(0, 30, 28), PackedInt32Array(27, 28, 23), PackedInt32Array(23, 28, 29), PackedInt32Array(23, 29, 22), PackedInt32Array(22, 29, 9), PackedInt32Array(9, 29, 8), PackedInt32Array(33, 32, 34), PackedInt32Array(34, 32, 35), PackedInt32Array(35, 36, 37), PackedInt32Array(37, 36, 21), PackedInt32Array(37, 21, 39), PackedInt32Array(37, 39, 38), PackedInt32Array(32, 40, 35), PackedInt32Array(35, 40, 36), PackedInt32Array(21, 36, 20), PackedInt32Array(38, 41, 37), PackedInt32Array(34, 42, 33), PackedInt32Array(33, 42, 43), PackedInt32Array(44, 41, 45), PackedInt32Array(45, 41, 46), PackedInt32Array(46, 41, 38), PackedInt32Array(46, 38, 47), PackedInt32Array(26, 43, 25), PackedInt32Array(25, 43, 48), PackedInt32Array(47, 49, 46), PackedInt32Array(42, 44, 43), PackedInt32Array(43, 44, 48), PackedInt32Array(48, 44, 45), PackedInt32Array(13, 12, 50), PackedInt32Array(50, 49, 13), PackedInt32Array(13, 49, 47), PackedInt32Array(13, 47, 51)]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_28hyf"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_11ekw"]
sky_material = SubResource("ProceduralSkyMaterial_28hyf")

[sub_resource type="Environment" id="Environment_13vtk"]
background_mode = 2
sky = SubResource("Sky_11ekw")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cx8qq"]
albedo_texture = ExtResource("42_w5g3l")
emission_energy_multiplier = 13.22
uv1_scale = Vector3(25, 25, 25)
texture_filter = 2
point_size = 128.0

[sub_resource type="PlaneMesh" id="PlaneMesh_4wwe0"]
lightmap_size_hint = Vector2i(377, 377)
add_uv2 = true
size = Vector2(75, 75)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_o7c60"]
data = PackedVector3Array(37.5, 0, 39, -37.5, 0, 39, 37.5, 0, -39, -37.5, 0, 39, -37.5, 0, -39, 37.5, 0, -39)

[sub_resource type="BoxShape3D" id="BoxShape3D_xc3id"]
size = Vector3(76.3111, 0.319824, 76.66)

[sub_resource type="BoxShape3D" id="BoxShape3D_sc46n"]
size = Vector3(0.644165, 0.463867, 2.39838)

[sub_resource type="BoxShape3D" id="BoxShape3D_nff0b"]
size = Vector3(11.7309, 11.1433, 9.20322)

[sub_resource type="BoxShape3D" id="BoxShape3D_vxn8k"]
size = Vector3(2.33154, 3.16882, 4.45436)

[node name="world" type="Node3D" groups=["Persist"]]
script = ExtResource("1_y5q3h")
floor_num = -1

[node name="ScareDirector" parent="." instance=ExtResource("1_faoyl")]

[node name="Player" parent="." instance=ExtResource("2_n1cxu")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.2092, 0.0844421, 8.67806)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
navigation_mesh = SubResource("NavigationMesh_5ah0g")

[node name="stage" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="environment" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="NavigationRegion3D/environment"]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="NavigationRegion3D/environment"]
environment = SubResource("Environment_13vtk")
script = ExtResource("5_6517x")
dark_properties = {
"adjustment_contrast": 1.25,
"tonemap_exposure": 5.0
}

[node name="InteractableTest" parent="NavigationRegion3D" instance=ExtResource("4_p0gx3")]
transform = Transform3D(0.28, 0, 0, 0, 0.28, 0, 0, 0, 0.28, 0, 2, -5.82439)

[node name="StaticBody3D3" parent="NavigationRegion3D" instance=ExtResource("15_2x2rp")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 20.607, 0.5, 0.773668)

[node name="meeting_room_wall_Door" parent="NavigationRegion3D" instance=ExtResource("15_tm150")]
transform = Transform3D(0.647, 0, 0, 0, 0.647, 0, 0, 0, 0.647, 10.6894, 0.504028, -9.97101)

[node name="WallMeetingRoomWithDoorGlass" parent="NavigationRegion3D/meeting_room_wall_Door" index="4"]
transform = Transform3D(0.999997, 0.00253072, 0, -0.00253072, 0.999997, 0, 0, 0, 1, 0, 0, 0)
surface_material_override/0 = null

[node name="OmniLight3D" type="OmniLight3D" parent="NavigationRegion3D/meeting_room_wall_Door"]
transform = Transform3D(1.5456, 0, 0, 0, 1.5456, 0, 0, 0, 1.5456, 0, 4.31258, 2.79558)

[node name="StaticBody3D" parent="NavigationRegion3D" instance=ExtResource("15_toag5")]
transform = Transform3D(0.647, 0, 0, 0, 0.647, 0, 0, 0, 0.647, -0.70716, 0.504029, -10.007)

[node name="StaticBody3D2" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 26.481, 0.509067, 0.89951)
visible = false

[node name="StaticBody3D4" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 26.481, 0.509067, 8.89951)
visible = false

[node name="StaticBody3D5" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 26.481, 0.509067, 17.8995)
visible = false

[node name="StaticBody3D6" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 26.481, 0.509067, -11.1005)
visible = false

[node name="StaticBody3D7" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 26.481, 0.509067, -24.1005)
visible = false

[node name="StaticBody3D8" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 35.481, 0.509067, -24.1005)
visible = false

[node name="StaticBody3D9" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 35.481, 0.509067, -10.1005)
visible = false

[node name="StaticBody3D10" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 35.481, 0.509067, 6.89951)
visible = false

[node name="StaticBody3D11" parent="NavigationRegion3D" groups=["multimesh"] instance=ExtResource("39_l18u8")]
transform = Transform3D(-2.82813e-08, 0, 0.647, 0, 0.647, 0, -0.647, 0, -2.82813e-08, 35.481, 0.509067, 20.8995)
visible = false

[node name="HR_ArchwayWall" parent="NavigationRegion3D" instance=ExtResource("10_m81cq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.09748, 0.509068, -7.88002)

[node name="Elevator" parent="." instance=ExtResource("41_n2l23")]
transform = Transform3D(0.0293697, 0, 0.999569, 0, 1, 0, -0.999569, 0, 0.0293697, -18.7858, -0.245457, 3.82707)

[node name="floor_meshes" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="carpet_mesh_1" type="MeshInstance3D" parent="floor_meshes" groups=["Real_Floor"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.61279, -0.494312, -1.01652)
layers = 1023
material_override = SubResource("StandardMaterial3D_cx8qq")
mesh = SubResource("PlaneMesh_4wwe0")

[node name="footstep_collider_carpet" type="Area3D" parent="floor_meshes/carpet_mesh_1"]
collision_layer = 32768
collision_mask = 32768
script = ExtResource("44_epuy0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor_meshes/carpet_mesh_1/footstep_collider_carpet"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.29548, 0)
shape = SubResource("ConcavePolygonShape3D_o7c60")

[node name="floor_gpu_particle_collision" type="GPUParticlesCollisionBox3D" parent="floor_meshes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.8851, -0.985187, 1.00272)
size = Vector3(92.6323, 2, 85.514)

[node name="floor_colliders" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0477006, 0)

[node name="StaticBody3D" type="StaticBody3D" parent="floor_colliders"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor_colliders/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.64869, -0.198545, -1.01932)
shape = SubResource("BoxShape3D_xc3id")

[node name="base_airduct" parent="." instance=ExtResource("19_va06c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.7115, 0.858505, -1.48411)

[node name="airduct_longer" parent="." instance=ExtResource("21_fscik")]
transform = Transform3D(1.47, 0, 0, 0, 2.49, 0, 0, 0, 1.47, 14.4115, 0.57453, 3.80822)

[node name="Area3D" type="Area3D" parent="airduct_longer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.260137)
collision_layer = 0
collision_mask = 65536
script = ExtResource("22_n7wpk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="airduct_longer/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1.00008, 0, 0, 0, 1, 0.00421238, 0.00830393, 0.635229)
shape = SubResource("BoxShape3D_sc46n")

[node name="airduct_vent_cover" parent="." instance=ExtResource("22_cdvgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.5565, 1.29504, 6.18498)

[node name="ZoneOptimizer" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 2
script = ExtResource("24_s3eqx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="ZoneOptimizer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.45474, -1.30119, -0.427109)
shape = SubResource("BoxShape3D_nff0b")

[node name="DetectionArea" type="Area3D" parent="ZoneOptimizer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.4081, 0, 7.37555)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="ZoneOptimizer/DetectionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.448975, 0.835388, -0.134636)
shape = SubResource("BoxShape3D_vxn8k")

[node name="Desk2" parent="." instance=ExtResource("25_rport")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.10216, 0.00906754, 2.82062)

[node name="BodyFromCeiling" parent="." instance=ExtResource("19_p7jh4")]

[connection signal="body_entered" from="airduct_longer/Area3D" to="airduct_longer/Area3D" method="_on_body_entered"]
[connection signal="body_exited" from="airduct_longer/Area3D" to="airduct_longer/Area3D" method="_on_body_exited"]
[connection signal="body_entered" from="ZoneOptimizer" to="ZoneOptimizer" method="_on_body_entered"]
[connection signal="body_exited" from="ZoneOptimizer" to="ZoneOptimizer" method="_on_body_exited"]
[connection signal="body_entered" from="ZoneOptimizer/DetectionArea" to="ZoneOptimizer" method="_on_detection_area_body_entered"]
[connection signal="body_exited" from="ZoneOptimizer/DetectionArea" to="ZoneOptimizer" method="_on_detection_area_body_exited"]

[editable path="NavigationRegion3D/meeting_room_wall_Door"]
